{% extends "base.html" %}

{% block title %}Latest Prediction{% endblock %}

{% block content %}
<div class="container py-4">
  <!-- Hero -->
  {% if latest %}
  <!-- Prediction Card -->
  <div class="latest-prediction bg-dark p-4 rounded-4 border border-info border-opacity-25 mb-5 shadow-lg">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 class="mb-0" style="color: #00c8ff;">
        <i class="bi bi-activity me-2"></i>Latest Prediction{{ latest.comp_name }}
      </h2>
      <span class="badge bg-info bg-opacity-10 text-info">Active</span>
    </div>

    <div class="prediction-visual mb-4 position-relative">
      <img src="{{ latest.image_url }}" class="img-fluid rounded-3 border border-info border-opacity-25 shadow"
           style="max-height: 500px; width: 100%; object-fit: contain;" alt="Competition Image">

    </div>

    <div class="prediction-coords text-center">
      <div class="d-inline-flex gap-3">
        <div class="coord-box bg-info bg-opacity-10 px-3 py-2 rounded-3">
          <span class="text-info fw-bold">X:</span>
          <span class="text-white ms-1">{{ latest.x }}</span>
        </div>
        <div class="coord-box bg-info bg-opacity-10 px-3 py-2 rounded-3">
          <span class="text-info fw-bold">Y:</span>
          <span class="text-white ms-1">{{ latest.y }}</span>
        </div>
      </div>
    </div>
  </div>
  {% else %}
  <div class="alert alert-dark text-center py-4">
    <i class="bi bi-hourglass-split me-2"></i>
    <span class="text-white-75">No predictions yet. Check back soon!</span>
  </div>
  {% endif %}
  <!-- Donation + Benefits -->
<div class="text-center mt-5">
  <h4 class="text-white mb-3">
    <i class="bi bi-clock-history me-2"></i>View Previous Predictions
  </h4>
  <a href="/history" class="btn btn-outline-info px-4 py-2 mb-4">
    <i class="bi bi-calendar-range me-2"></i>History
  </a>

  <div class="bg-info bg-opacity-10 border border-info border-opacity-25 rounded-4 p-4 mt-4 mx-auto" style="max-width: 600px;">
    <h5 class="text-info fw-bold mb-2">
      <i class="bi bi-gem me-2"></i>Support Us – Get Donator Perks!
    </h5>
    <p class="text-white-75 mb-3">Donate <strong>£10/month</strong> and unlock access to <strong>5 different AI model predictions</strong> and their <strong>averages</strong> for each image.</p>
    <a href="/donate" class="btn btn-info fw-bold px-4">
      <i class="bi bi-cash-stack me-2"></i>Donate Now
    </a>
  </div>
</div>

</div>

<style>
  .pulse-animation {
    position: absolute;
    width: 30px;
    height: 30px;
    background: rgba(255, 0, 0, 0.3);
    border-radius: 50%;
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0% { transform: scale(0.8); opacity: 0.7; }
    70% { transform: scale(1.3); opacity: 0; }
    100% { transform: scale(0.8); opacity: 0; }
  }

  .coord-box:hover {
    background-color: rgba(0,200,255,0.2) !important;
    transform: scale(1.05);
  }
</style>
{% endblock %}
